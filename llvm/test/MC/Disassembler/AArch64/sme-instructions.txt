# RUN: llvm-mc -triple aarch64-none-linux-gnu -mattr=+sme,+sme-f64,+sme-i64 -disassemble < %s | FileCheck %s

# CHECK: addha za0.d, p0/m, p0/m, z0.d
# CHECK: addha za7.d, p1/m, p7/m, z1.d
# CHECK: addha za0.s, p0/m, p0/m, z0.s
# CHECK: addha za3.s, p1/m, p7/m, z31.s
0x00 0x00 0xd0 0xc0
0x27 0xe4 0xd0 0xc0
0x00 0x00 0x90 0xc0
0xe3 0xe7 0x90 0xc0

# CHECK: addva za0.d, p0/m, p0/m, z0.d
# CHECK: addva za7.d, p1/m, p7/m, z1.d
# CHECK: addva za0.s, p0/m, p0/m, z0.s
# CHECK: addva za3.s, p2/m, p6/m, z31.s
0x00 0x00 0xd1 0xc0
0x27 0xe4 0xd1 0xc0
0x00 0x00 0x91 0xc0
0xe3 0xcb 0x91 0xc0

# CHECK: ld1b {za0h.b[w12, 12]}, p7/z, [x19, x4]
# CHECK: ld1b {za0v.b[w13, 13]}, p7/z, [x20, x5]
# CHECK: ld1b {za0h.b[w14, 0]}, p7/z, [x21]
# CHECK: ld1b {za0v.b[w15, 0]}, p7/z, [x22]
0x6c 0x1e 0x04 0xe0
0x8d 0xbe 0x05 0xe0
0xa0 0x5e 0x1f 0xe0
0xc0 0xfe 0x1f 0xe0

# CHECK: st1b {za0h.b[w12, 14]}, p7, [x27, x6]
# CHECK: st1b {za0v.b[w13, 15]}, p7, [x28, x7]
# CHECK: st1b {za0h.b[w14, 0]}, p7, [x29]
# CHECK: st1b {za0v.b[w15, 0]}, p7, [x30]
0x6e 0x1f 0x26 0xe0
0x8f 0xbf 0x27 0xe0
0xa0 0x5f 0x3f 0xe0
0xc0 0xff 0x3f 0xe0

# CHECK: ld1h {za1h.h[w12, 4]}, p7/z, [x19, x4, lsl #1]
# CHECK: ld1h {za1v.h[w13, 5]}, p7/z, [x20, x5, lsl #1]
# CHECK: ld1h {za1h.h[w14, 0]}, p7/z, [x21]
# CHECK: ld1h {za1v.h[w15, 0]}, p7/z, [x22]
0x6c 0x1e 0x44 0xe0
0x8d 0xbe 0x45 0xe0
0xa8 0x5e 0x5f 0xe0
0xc8 0xfe 0x5f 0xe0

# CHECK: st1h {za1h.h[w12, 6]}, p7, [x27, x6, lsl #1]
# CHECK: st1h {za1v.h[w13, 7]}, p7, [x28, x7, lsl #1]
# CHECK: st1h {za1h.h[w14, 0]}, p7, [x29]
# CHECK: st1h {za1v.h[w15, 0]}, p7, [x30]
0x6e 0x1f 0x66 0xe0
0x8f 0xbf 0x67 0xe0
0xa8 0x5f 0x7f 0xe0
0xc8 0xff 0x7f 0xe0

# CHECK: ld1w {za3h.s[w12, 2]}, p7/z, [x19, x4, lsl #2]
# CHECK: ld1w {za3v.s[w13, 3]}, p7/z, [x20, x5, lsl #2]
# CHECK: ld1w {za3h.s[w14, 0]}, p7/z, [x21]
# CHECK: ld1w {za3v.s[w15, 0]}, p7/z, [x22]
0x6e 0x1e 0x84 0xe0
0x8f 0xbe 0x85 0xe0
0xac 0x5e 0x9f 0xe0
0xcc 0xfe 0x9f 0xe0

# CHECK: st1w {za3h.s[w12, 2]}, p7, [x27, x6, lsl #2]
# CHECK: st1w {za3v.s[w13, 3]}, p7, [x28, x7, lsl #2]
# CHECK: st1w {za3h.s[w14, 0]}, p7, [x29]
# CHECK: st1w {za3v.s[w15, 0]}, p7, [x30]
0x6e 0x1f 0xa6 0xe0
0x8f 0xbf 0xa7 0xe0
0xac 0x5f 0xbf 0xe0
0xcc 0xff 0xbf 0xe0

# CHECK: ld1d {za7h.d[w12, 1]}, p7/z, [x19, x4, lsl #3]
# CHECK: ld1d {za7v.d[w13, 1]}, p7/z, [x20, x5, lsl #3]
# CHECK: ld1d {za7h.d[w14, 0]}, p7/z, [x21]
# CHECK: ld1d {za7v.d[w15, 0]}, p7/z, [x22]
0x6f 0x1e 0xc4 0xe0
0x8f 0xbe 0xc5 0xe0
0xae 0x5e 0xdf 0xe0
0xce 0xfe 0xdf 0xe0

# CHECK: st1d {za7h.d[w12, 1]}, p7, [x27, x6, lsl #3]
# CHECK: st1d {za7v.d[w13, 1]}, p7, [x28, x7, lsl #3]
# CHECK: st1d {za7h.d[w14, 0]}, p7, [x29]
# CHECK: st1d {za7v.d[w15, 0]}, p7, [x30]
0x6f 0x1f 0xe6 0xe0
0x8f 0xbf 0xe7 0xe0
0xae 0x5f 0xff 0xe0
0xce 0xff 0xff 0xe0

# CHECK: ld1q {za15h.q[w12, 0]}, p7/z, [x19, x4, lsl #4]
# CHECK: ld1q {za15v.q[w13, 0]}, p7/z, [x20, x5, lsl #4]
# CHECK: ld1q {za15h.q[w14, 0]}, p7/z, [x21]
# CHECK: ld1q {za15v.q[w15, 0]}, p7/z, [x22]
0x6f 0x1e 0xc4 0xe1
0x8f 0xbe 0xc5 0xe1
0xaf 0x5e 0xdf 0xe1
0xcf 0xfe 0xdf 0xe1

# CHECK: st1q {za15h.q[w12, 0]}, p7, [x27, x6, lsl #4]
# CHECK: st1q {za15v.q[w13, 0]}, p7, [x28, x7, lsl #4]
# CHECK: st1q {za15h.q[w14, 0]}, p7, [x29]
# CHECK: st1q {za15v.q[w15, 0]}, p7, [x30]
0x6f 0x1f 0xe6 0xe1
0x8f 0xbf 0xe7 0xe1
0xaf 0x5f 0xff 0xe1
0xcf 0xff 0xff 0xe1

# CHECK: ldr za[w15, 15], [x30, #15, mul vl]
# CHECK: str za[w15, 15], [x30, #15, mul vl]
0xcf 0x63 0x00 0xe1
0xcf 0x63 0x20 0xe1

# CHECK: bfmopa za3.s, p7/m, p7/m, z31.h, z31.h
# CHECK: bfmops za3.s, p7/m, p7/m, z31.h, z31.h
0xe3 0xff 0x9f 0x81
0xf3 0xff 0x9f 0x81

# CHECK: fmopa za3.s, p7/m, p7/m, z31.h, z31.h
# CHECK: fmops za3.s, p7/m, p7/m, z31.h, z31.h
0xe3 0xff 0xbf 0x81
0xf3 0xff 0xbf 0x81

# CHECK: fmopa za3.s, p7/m, p7/m, z31.s, z31.s
# CHECK: fmopa za7.d, p7/m, p7/m, z31.d, z31.d
# CHECK: fmops za3.s, p7/m, p7/m, z31.s, z31.s
# CHECK: fmops za7.d, p7/m, p7/m, z31.d, z31.d
0xe3 0xff 0x9f 0x80
0xe7 0xff 0xdf 0x80
0xf3 0xff 0x9f 0x80
0xf7 0xff 0xdf 0x80

# CHECK: sumopa za3.s, p7/m, p7/m, z31.b, z31.b
# CHECK: sumopa za7.d, p7/m, p7/m, z31.h, z31.h
# CHECK: sumops za3.s, p7/m, p7/m, z31.b, z31.b
# CHECK: sumops za7.d, p7/m, p7/m, z31.h, z31.h
0xe3 0xff 0xbf 0xa0
0xe7 0xff 0xff 0xa0
0xf3 0xff 0xbf 0xa0
0xf7 0xff 0xff 0xa0

# CHECK: umopa za3.s, p7/m, p7/m, z31.b, z31.b
# CHECK: umopa za7.d, p7/m, p7/m, z31.h, z31.h
# CHECK: umops za3.s, p7/m, p7/m, z31.b, z31.b
# CHECK: umops za7.d, p7/m, p7/m, z31.h, z31.h
0xe3 0xff 0xbf 0xa1
0xe7 0xff 0xff 0xa1
0xf3 0xff 0xbf 0xa1
0xf7 0xff 0xff 0xa1

# CHECK: usmopa za3.s, p7/m, p7/m, z31.b, z31.b
# CHECK: usmopa za7.d, p7/m, p7/m, z31.h, z31.h
# CHECK: usmops za3.s, p7/m, p7/m, z31.b, z31.b
# CHECK: usmops za7.d, p7/m, p7/m, z31.h, z31.h
0xe3 0xff 0x9f 0xa1
0xe7 0xff 0xdf 0xa1
0xf3 0xff 0x9f 0xa1
0xf7 0xff 0xdf 0xa1

# CHECK: mov z31.b, p7/m, za0h.b[w15, 15]
# CHECK: mov z31.b, p7/m, za0v.b[w15, 15]
# CHECK: mov z31.h, p7/m, za1h.h[w15, 7]
# CHECK: mov z31.h, p7/m, za1v.h[w15, 7]
# CHECK: mov z31.s, p7/m, za3h.s[w15, 3]
# CHECK: mov z31.s, p7/m, za3v.s[w15, 3]
# CHECK: mov z31.d, p7/m, za7h.d[w15, 1]
# CHECK: mov z31.d, p7/m, za7v.d[w15, 1]
0xff 0x7d 0x02 0xc0
0xff 0xfd 0x02 0xc0
0xff 0x7d 0x42 0xc0
0xff 0xfd 0x42 0xc0
0xff 0x7d 0x82 0xc0
0xff 0xfd 0x82 0xc0
0xff 0x7d 0xc2 0xc0
0xff 0xfd 0xc2 0xc0

# CHECK: mov za0h.b[w15, 15], p7/m, z31.b
# CHECK: mov za0v.b[w15, 15], p7/m, z31.b
# CHECK: mov za1h.h[w15, 7], p7/m, z31.h
# CHECK: mov za1v.h[w15, 7], p7/m, z31.h
# CHECK: mov za3h.s[w15, 3], p7/m, z31.s
# CHECK: mov za3v.s[w15, 3], p7/m, z31.s
# CHECK: mov za7h.d[w15, 1], p7/m, z31.d
# CHECK: mov za7v.d[w15, 1], p7/m, z31.d
0xef 0x7f 0x00 0xc0
0xef 0xff 0x00 0xc0
0xef 0x7f 0x40 0xc0
0xef 0xff 0x40 0xc0
0xef 0x7f 0x80 0xc0
0xef 0xff 0x80 0xc0
0xef 0x7f 0xc0 0xc0
0xef 0xff 0xc0 0xc0

# CHECK: smstart
# CHECK: smstart za
0x7f 0x47 0x03 0xd5
0x7f 0x45 0x03 0xd5

# CHECK: smstop
# CHECK: smstop za
0x7f 0x46 0x03 0xd5
0x7f 0x44 0x03 0xd5
